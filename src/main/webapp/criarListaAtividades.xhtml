<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core" template="index.xhtml">


	<ui:define name="centro">
		<style>
.primeira-coluna {
	width: 60%;
}

.segunda-coluna {
	width: 40%;
	display: inline;
}

.ui-selectonemenu {
	width: 100% !important;
}

.ui-selectonemenu-label {
	width: 100% !important;
}
</style>
		<h:form id="listaAtividadeForm">
			<p:wizard id="listaAtividadeWizard" nextLabel="Próximo"
				backLabel="Voltar">
				<p:tab id="dadosDaLista" title="Dados da lista">
					<p:messages id="mensagem" showDetail="false" closable="true" />
					<p:panel columns="2" id="panelDadosLista"
						style="margin-bottom:20px" header="Dados da lista">
						<h:panelGrid columns="2" cellpadding="10">
							<p:outputLabel for="nome" value="Nome da lista" />
							<p:inputText id="nome" size="60"
								value="#{cadastroListaAtividadeBean.lista.nome}" required="true"
								requiredMessage="É necessário informar o nome do lista de atividade.">
							</p:inputText>
							<p:outputLabel for="desc" value="Descrição:" />
							<p:inputTextarea
								value="#{cadastroListaAtividadeBean.lista.descricao}" id="desc"
								cols="60" />
						</h:panelGrid>
					</p:panel>
				</p:tab>
				<p:tab id="tabSelecionarAtividades" title="Selecionar Atividades">
					<br />
					<p:panel columns="2" id="panelAtividadesSelecionadas"
						style="margin-bottom:20px" header="Selecionar Atividades">
						<p:panel header="Filtrar atividades" toggleable="true" closable="true"
							toggleSpeed="500" collapsed="true" style="margin-bottom:20px">
							<p:panelGrid columns="2" styleClass="semBorda">
								<p:outputLabel value="Nome da atividade: " />
								<p:inputText id="nomeAtividadeInput" value="#{cadastroListaAtividadeBean.nomeAtividade}"
									size="70" immediate="true"/>
								<p:outputLabel for="comboTemplate"
									value="Selecione o template: " />
								<p:selectOneMenu id="comboTemplate"
									value="#{cadastroListaAtividadeBean.templateSelecionado}"
									required="false" immediate="true">
									<f:selectItem itemLabel="Selecione o template" itemValue="" />
									<f:selectItems value="#{cadastroListaAtividadeBean.templates}"/>
								</p:selectOneMenu>
								<p:outputLabel value="Palavra: " />
								<p:inputText id="inputPalavra" value="#{cadastroListaAtividadeBean.palavra}" immediate="true"/>
							</p:panelGrid>
							<br />
							<p:panelGrid columns="2" cellpadding="10">
								<p:commandButton value="Pesquisar" id="ajax" immediate="true"
									update=":listaAtividadeForm:atividadesDisponiveisField"
									actionListener="#{cadastroListaAtividadeBean.pesquisar}"
									styleClass="ui-priority-primary" ajax="true" />
								<p:commandButton value="Limpar filtros" id="ajax2" immediate="true"
									update=":listaAtividadeForm:atividadesDisponiveisField"
									actionListener="#{cadastroListaAtividadeBean.limparInformacoes}"
									styleClass="ui-priority-primary" ajax="true" />
							</p:panelGrid>
						</p:panel>
						<h:panelGrid columns="2"
							columnClasses="primeira-coluna, segunda-coluna" cellpadding="0"
							cellspacing="0">
							<p:fieldset id="atividadesDisponiveisField"
								legend="Atividades disponiveis">
								<p:dataTable id="atividadesDisponiveis" var="atividade"
									paginator="true" rows="5"
									emptyMessage="Nenhuma atividade disponível"
									style="text-align: center" paginatorPosition="bottom"
									lazy="true" value="#{cadastroListaAtividadeBean.atividades}"
									rowKey="atividade" sortMode="multiple">
									<p:column headerText="Nome da atividade"
										sortBy="#{atividade.nome}">
										<p:outputLabel value="#{atividade.nome}" />
									</p:column>
									<p:column headerText="Template" sortBy="#{atividade.template}">
										<p:outputLabel value="#{atividade.templateToString}" />
									</p:column>
									<p:column headerText="Palavra" sortBy="#{atividade.palavra}">
										<p:outputLabel value="#{atividade.palavra}" />
									</p:column>
									<p:column headerText="Ações">
										<p:commandButton id="detalheAtividadeButton"
											actionListener="#{cadastroListaAtividadeBean.definirAtividadeDetalhes(atividade)}"
											oncomplete="PF('detalhesAtividade').show();"
											style="margin-right: 10px" icon="ui-icon-search"
											update=":#{p:component('detalhesAtividade')}"
											title="Ver detalhes da atividade" />
										<p:commandButton icon="ui-icon-plus" id="botaoAdicionar"
											actionListener="#{cadastroListaAtividadeBean.adicionar(atividade)}"
											update=":listaAtividadeForm:dropArea :listaAtividadeForm:atividadesSelecionadas :listaAtividadeForm:atividadesDisponiveis"
											title="Adicionar atividade" />
									</p:column>

								</p:dataTable>
							</p:fieldset>
							<p:fieldset id="atividadesSelecionadas"
								legend="Atividades selecionadas"
								style="margin-top:20px;margin-left:5%;">
								<p:outputPanel id="dropArea">
									<h:outputText value="Adicione as atividades da lista ao lado clicando no botão adicionar"
										rendered="#{empty cadastroListaAtividadeBean.atividadesSelecionadas}"
										style="font-size:24px;" />
									<p:dataTable id="atividadesSelecionadasTable" var="atividade"
										value="#{cadastroListaAtividadeBean.atividadesSelecionadas}"
										rendered="#{not empty cadastroListaAtividadeBean.atividadesSelecionadas}">

										<p:column headerText="Nome da atividade"
											sortBy="#{atividade.nome}">
											<p:outputLabel value="#{atividade.nome}" />
										</p:column>
										<p:column headerText="Template" sortBy="#{atividade.template}">
											<p:outputLabel value="#{atividade.templateToString}" />
										</p:column>
										<p:column headerText="Palavra" sortBy="#{atividade.palavra}">
											<p:outputLabel value="#{atividade.palavra}" />
										</p:column>

										<p:column headerText="Ações">
											<p:commandButton icon="ui-icon-close" id="botaoRemover"
												style="margin-right: 10px"
												actionListener="#{cadastroListaAtividadeBean.remover(atividade)}"
												update=":listaAtividadeForm:dropArea :listaAtividadeForm:atividadesSelecionadas :listaAtividadeForm:atividadesDisponiveis"
												title="Remover atividade" />
										</p:column>

									</p:dataTable>
								</p:outputPanel>
							</p:fieldset>
						</h:panelGrid>
						<br />
						<center>
							<p:outputPanel>
								<p:commandButton value="Criar lista" id="ajax3"
									action="#{cadastroListaAtividadeBean.cadastrar}"
									styleClass="ui-priority-primary" />
							</p:outputPanel>
						</center>
					</p:panel>
				</p:tab>
			</p:wizard>

			<p:dialog id="detalhesAtividade" header="Detalhes da Atividade"
				widgetVar="detalhesAtividade" closable="true" height="400"
				width="800" closeOnEscape="true" showHeader="true" showEffect="true"
				position="center" responsive="true" draggable="true">
				<center>
					<p:panelGrid columns="2">
						<p:outputLabel value="Nome da atividade" style="font-weight: bold" />
						<p:outputLabel
							value="#{cadastroListaAtividadeBean.atividadeSelecionada.nome}" />

						<p:outputLabel value="Template" style="font-weight: bold" />
						<p:outputLabel
							value="#{cadastroListaAtividadeBean.atividadeSelecionada.templateToString}" />

						<p:outputLabel value="Link do reforço" style="font-weight: bold" />
						<p:outputLabel
							value="#{cadastroListaAtividadeBean.atividadeSelecionada.reforco}" />

						<p:outputLabel value="Palavra" style="font-weight: bold" />
						<p:outputLabel
							value="#{cadastroListaAtividadeBean.atividadeSelecionada.palavra}" />

					</p:panelGrid>
					<p:dataTable var="imagem" paginator="true" rows="5"
						style="width: 400" paginatorPosition="bottom" id="tabelaImagens"
						value="#{cadastroListaAtividadeBean.arquivos}"
						rowIndexVar="rowIndex"
						emptyMessage="Não foram encontrados registros">
						<p:column>
							<p:commandLink value="Imagem #{rowIndex+1}" ajax="false"
								style="font-size:14px;color:blue;" target="_blank">
								<p:fileDownload
									value="#{cadastroListaAtividadeBean.downloadImagem(imagem)}" />
							</p:commandLink>
						</p:column>
					</p:dataTable>
				</center>
			</p:dialog>

		</h:form>
	</ui:define>

</ui:composition>