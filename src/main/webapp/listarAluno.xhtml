<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core" template="index.xhtml">

	<ui:define name="centro">

		<style>
.textArea {
	resize: none;
	width: 500px;
	height: 300px;
	overflow-y: auto;
	margin-left: 400px;
	margin-top: 10px;
}

.old {
	background-color: #CCCCDD;
	color: red;
}

.companyHeaderGrid tr, .companyHeaderGrid td {
	border: none !important;
}

.centralizado tr, .centralizado td {
	text-align: center;
}
</style>

		<style>
.semBorda tr, .semBorda td {
	border: none !important;
}
</style>

		<script>			
		function descricaoCancelamento(){
			var flag = document.getElementById('descricao');
			flag.style.display = "block";
			limparTextArea();
		}		 		

</script>

		<script>		
		function ocultar(){
			var flag = document.getElementById('descricao');
			flag.style.display = "none";
		}		
						  		
</script>

		<script>
		function limparTextArea(){
			document.getElementById('desc').value = "";
		}
</script>

		<script>
		function detalhes(){
			var informacao = document.getElementById('detalhes');
			informacao.style.display = "block";
		}
</script>
		<p:messages id="growl" showDetail="false" closable="true" />
		<h:form id="formPesquisar">
			<p:fieldset legend="Pesquisar estudantes" toggleable="true"
				toggleSpeed="500">
				<!-- AUTO COMPLETE -->
				<p:panelGrid columns="4" styleClass="semBorda">
					<h:outputText value="Nome do aluno: " style="font-weight:bold" />
					<p:inputText value="#{listarAlunoBean.nomeEstudante}" />
				</p:panelGrid>
				<h:panelGrid columns="3" cellpadding="10">
					<h:commandButton value="Pesquisar " id="ajax" update="@form"
						actionListener="#{listarAlunoBean.pesquisar}"
						styleClass="ui-priority-primary" />

					<h:commandButton value="Limpar " id="ajax2" update="@form"
						actionListener="#{listarAlunoBean.limparInformacoes}"
						styleClass="ui-priority-primary" />

				</h:panelGrid>
			</p:fieldset>

		</h:form>
		<h:form id="formTabelaEstudantes" enctype="multipart/form-data">
			<p:fieldset legend="Alunos" toggleable="true" toggleSpeed="500">

				<p:dataTable var="estudante" paginator="true" rows="5"
					style="text-align: center" paginatorPosition="bottom" lazy="true"
					id="tabelaEstudantes" widgetVar="tabelaEstudantes"
					emptyMessage="Nenhum aluno encontrado."
					value="#{listarAlunoBean.estudantes}" rowKey="estudante"
					sortMode="multiple">

					<f:facet name="header">
						Alunos
					</f:facet>

					<p:column headerText="Nome" sortBy="#{estudante.nome}">
						<h:outputText value="#{estudante.nome}" />
					</p:column>

					<p:column headerText="Data de nascimento"
						sortBy="#{estudante.dataNascimento}">
						<h:outputText value="#{estudante.dataNascimento}">
							<f:convertDateTime pattern="dd/MM/yyyy HH:mm"
								timeZone="GMT-03:00" />
						</h:outputText>
					</p:column>
					<p:column headerText="Situação" sortBy="#{estudante.situacao}">
						<h:outputText value="#{estudante.situacao.toString()}" />
					</p:column>

					<p:column headerText="Ações">
						<p:panelGrid columns="3" styleClass="semBorda">
							<p:commandButton id="botaoInativar"
								actionListener="#{listarAlunoBean.definirEstudante(estudante)}"
								oncomplete="PF('confirmarInativar').show();"
								update=":#{p:component('confirmarInativar')}" value="Inativar" />
							<p:commandButton id="botaoAtivar"
								actionListener="#{listarAlunoBean.definirEstudante(estudante)}"
								oncomplete="PF('confirmarAtivar').show();"
								update=":#{p:component('confirmarAtivar')}" value="Ativar" />
							<p:commandButton id="botaoExcluir"
								actionListener="#{listarAlunoBean.definirEstudante(estudante)}"
								oncomplete="PF('confirmarExcluir').show();"
								update=":#{p:component('confirmarExcluir')}" value="Excluir" />
						</p:panelGrid>
						<p:link value="Ver relatório de tarefas"
							outcome="relatorioTarefas.xhtml?idEstudante=#{estudante.id}"
							includeViewParams="false" target="_blank" />
					</p:column>
				</p:dataTable>

			</p:fieldset>
		</h:form>
		<p:dialog id="confirmarInativar" header="Mensagem"
			widgetVar="confirmarInativar" resizable="false" height="100"
			closeOnEscape="true" showHeader="true" responsive="true"
			draggable="true">
			<p:outputPanel style="text-align:center">
				<h:outputText value="Tem certeza que deseja inativar o aluno?"
					style="font-weight: bold; color:gray" />
			</p:outputPanel>
			<br />
			<br />
			<h:form>
				<center>
					<p:commandButton value="Sim"
						actionListener="#{listarAlunoBean.inativar()}"
						update=":#{p:component('tabelaEstudantes')} :confirmarInativar :growl" />

					<p:commandButton value="Cancelar" update=":confirmarInativar " />
				</center>
			</h:form>
		</p:dialog>
		<p:dialog id="confirmarAtivar" header="Mensagem"
			widgetVar="confirmarAtivar" resizable="false" height="100"
			closeOnEscape="true" showHeader="true" responsive="true"
			draggable="true">
			<p:outputPanel style="text-align:center">
				<h:outputText value="Tem certeza que deseja ativar o aluno?"
					style="font-weight: bold; color:gray" />
			</p:outputPanel>
			<br />
			<br />
			<h:form>
				<center>
					<p:commandButton value="Sim"
						actionListener="#{listarAlunoBean.ativar()}"
						update=":#{p:component('tabelaEstudantes')} :confirmarAtivar :growl" />
					<p:commandButton value="Cancelar" update=":confirmarAtivar " />
				</center>
			</h:form>
		</p:dialog>
		<p:dialog id="confirmarExcluir" header="Mensagem"
			widgetVar="confirmarExcluir" resizable="false" height="100"
			closeOnEscape="true" showHeader="true" responsive="true"
			draggable="true">
			<p:outputPanel style="text-align:center">
				<h:outputText
					value="Essa operação não pode ser desfeita. Tem certeza que deseja excluir o aluno?"
					style="font-weight: bold; color:gray" />
			</p:outputPanel>
			<br />
			<br />
			<h:form>
				<center>
					<p:commandButton value="Sim"
						actionListener="#{listarAlunoBean.excluir()}"
						update=":#{p:component('tabelaEstudantes')} :confirmarExcluir :growl" />
					<p:commandButton value="Cancelar" update=":confirmarExcluir " />
				</center>
			</h:form>
		</p:dialog>
	</ui:define>
</ui:composition>